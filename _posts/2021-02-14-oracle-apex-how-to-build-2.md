---
title: How to build an Oracle Apex application (2)
categories: development
tags: [ Oracle, Apex, DevOps, DataModeling ]
permalink: /oracle-apex-how-to-build-2/
toc: false
toc_label: "Table of contents"
toc_icon: "database"
---

Last time in ["How to build an Oracle Apex application (1)"]({{ site.url }}{{ site.baseurl }}/oracle-apex-how-to-build-1/), I gave you an
introduction.

This time I will elaborate on the architecture.

# Project folder layout

The following top level directories exist for every database application
project:

<dl>
  <dt>apex</dt><dd>Apex directory containing the exported Apex application and
  other source files like Javascript and so on.</dd>
  <dt>conf</dt><dd>Configuration scripts for Maven or Flyway.</dd>
  <dt>db</dt><dd>Database scripts.</dd>
  <dt>ddl</dt><dd>DDL scripts generated by SQL Developer Datamodeler.</dd>
  <dt>doc</dt><dd>Documentation.</dd>
</dl>

## Directory apex

When you invoke on Windows:

```
tree /A apex
```

you will get something like this:


```
\---f<application id>
    \---application
        +---pages
        +---shared_components
        |   +---files
        |   +---globalization
        |   +---logic
        |   +---navigation
        |   |   +---breadcrumbs
        |   |   +---lists
        |   |   \---tabs
        |   +---plugins
        |   |   +---dynamic_action
        |   |   \---item_type
        |   +---security
        |   |   +---app_access_control
        |   |   +---authentications
        |   |   \---authorizations
        |   \---user_interface
        |       +---lovs
        |       +---shortcuts
        |       \---templates
        |           +---breadcrumb
        |           +---button
        |           +---calendar
        |           +---label
        |           +---list
        |           +---page
        |           +---region
        |           \---report
        \---user_interfaces
```

## Directory db

```
tree /A db
```

returns:


```
+---<support schema>
|   \---src
|       +---dml
|       +---full
|       \---incr
+---<API schema>
|   \---src
|       +---admin
|       +---dml
|       +---full
|       +---incr
|       \---util
+---<DATA schema>
|   \---src
|       +---admin
|       +---dml
|       +---full
|       \---incr
+---<EXT schema>
|   +---src
|   |   +---admin
|   |   +---dml
|   |   +---full
|   |   \---incr
|   \---test
\---<UI schema>
    \---src
        +---admin
        +---dml
        +---full
        \---incr
```

Some explanation:
- the `support schema` directory contains scripts that let the application work with
support software. You can think of another schema that contains generic error
packages or packages to manipulate Apex text messages and in this directory
you will add the necessary grant scripts. The support software itself is
maintained by another project.
- the `admin` directories contain scripts to setup a schema by a DBA.
- the `dml` directories contain scripts to insert reference data, for instance
Apex text messages or a list of countries.
- the `full` directories contain Flyway database migration scripts that are run
every time they change. They are meant for database objects than can be
replaced (`CREATE OR REPLACE ...`).
- the `incr` directories contain Flyway database migration scripts that will run
only once, so for objects that can not be replaced like tables and constraints
or fro dropping objects.

### DATA

This is the schema that contains the data: the tables and all objects needed
to maintain the data logic. You may decide to put data logic packages in the
API layer but that is up to you.

The schema structure allows the UI layer to use objects from the DATA layer
but I think that should be only allowed for read access to simple tables,
think of List Of Values. All business logic should go via the API layer. It is
simple to define a view or package in the API layer that can be used for DML
purposes.

### API

This is the schema that contains the business logic. It may contain data logic
packages if you do not want to have packages in the data layer.

### UI

All User Interface logic. This means that this schema will be the parsing
schema for Apex. Please note that you can have more than one parsing schema
per Apex workspace so there is no problem having several applications with
different parsing schemas in a workspace.

### EXT

This is an EXTernal layer I have added to the structure. It is meant for
external logic: interfaces or data conversions. Please note that setting up a
new system almost always requires you to import data from another source. This
layer can take care of that. If your application has to support several customers
you may even have a layer for each customer. The level of this layer is the
same as the API layer. It can interact with the API layer in a bidirectional
way. After all, the external layer may use business logic and business logic
may use an interface from this layer. The UI layer may use objects from this layer too.


